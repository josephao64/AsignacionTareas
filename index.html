<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Asignación de Tareas</title>
    <!-- SweetAlert2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- Enlace al archivo CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Asignación de Tareas</h1>
        
        <div class="table-controls">
            <div class="filters">
                <input type="text" id="searchInput" placeholder="Buscar tareas...">
                
                <!-- Select para filtrar por tipo -->
                <select id="filterTipo">
                    <option value="">Todos los Tipos</option>
                    <!-- Opciones de tipos dinámicas -->
                </select>

                <!-- Select para filtrar por responsable -->
                <select id="filterResponsable">
                    <option value="">Todos los Responsables</option>
                    <option value="JOSE">JOSE</option>
                    <option value="MARINA">MARINA</option>
                    <option value="JOSEPH">JOSEPH</option>
                </select>

                <input type="date" id="filterFechaDesde" placeholder="Fecha Desde">
                <input type="date" id="filterFechaHasta" placeholder="Fecha Hasta">

                <!-- Ordenamiento -->
                <select id="sortOrder">
                    <option value="fechaEstimadaAsc">Culminación Más Reciente</option>
                    <option value="fechaEstimadaDesc">Culminación Más Antigua</option>
                    <option value="fechaCreacionDesc">Tarea Agregada Más Reciente</option>
                    <option value="fechaCreacionAsc">Tarea Agregada Más Antigua</option>
                </select>
                
                <button id="resetFilters" class="reset-filters-btn">Resetear Filtros</button>
            </div>
            <div class="actions-buttons">
                <button id="editarBtn" disabled>Editar</button>
                <button id="eliminarBtn" disabled>Eliminar</button>
                <button class="add-task-btn" onclick="abrirModal()">Agregar Tarea</button>

                <!-- Apartado de vistas -->
                <div id="viewSection">
                    <h3>Vista</h3>
                    <div id="filterEstadoCheckboxes">
                        <label><input type="checkbox" id="filterNoIniciado" checked> No Iniciado</label>
                        <label><input type="checkbox" id="filterEnProgreso" checked> En Progreso</label>
                        <label><input type="checkbox" id="filterCompletado" checked> Completado</label>
                    </div>
                </div>
            </div>
        </div>

        <table id="taskTable">
            <thead>
                <tr>
                    <th>Tipo</th>
                    <th>Descripción de la Tarea</th>
                    <th>Responsable</th>
                    <th>Fecha Estimada</th>
                    <th>Fecha de Culminación</th>
                    <th>Estado</th>
                    <th>Notas</th>
                </tr>
            </thead>
            <tbody>
                <!-- Las tareas se generarán aquí dinámicamente -->
            </tbody>
        </table>
    </div>

    <!-- Modal para Agregar/Editar Tarea -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <h2 id="modalTitle">Agregar Tarea</h2>
            <form id="taskForm">
                <label for="tipo">Tipo:</label>
                <div class="tipo-container">
                    <select id="tipo" required>
                        <option value="">Selecciona un tipo</option>
                        <!-- Los tipos se cargarán dinámicamente -->
                    </select>
                    <button type="button" id="addTipoBtn">Agregar Tipo</button>
                </div>

                <label for="descripcion">Descripción de la Tarea:</label>
                <textarea id="descripcion" required></textarea>

                <label>Responsable:</label>
                <!-- Checkboxes para responsables -->
                <div id="responsableCheckboxes">
                    <label><input type="checkbox" name="responsable" value="JOSE"> JOSE</label>
                    <label><input type="checkbox" name="responsable" value="MARINA"> MARINA</label>
                    <label><input type="checkbox" name="responsable" value="JOSEPH"> JOSEPH</label>
                </div>

                <label for="fechaEstimada">Fecha Estimada de Culminación:</label>
                <input type="date" id="fechaEstimada" required>

                <label for="notas">Notas Adicionales:</label>
                <textarea id="notas"></textarea>

                <button type="submit">Guardar Tarea</button>
            </form>
        </div>
    </div>

    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Firebase SDK -->
    <script type="module">
        // Importa Firebase y sus módulos
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";

        // Tu configuración de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCc_XN...goLunI_pk",
  authDomain: "tareasdb-193f4.firebaseapp.com",
  projectId: "tareasdb-193f4",
  storageBucket: "tareasdb-193f4.appspot.com",
  messagingSenderId: "654977996103",
  appId: "1:654977996103:web:9c246d4d16c1d3c943e862"
        };

        // Inicializa Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Exporta db para usarlo en otros scripts
        export { db };
    </script>

    <!-- Enlace al archivo JS -->
    <script type="module" src="script.js"></script>
</body>
</html>
